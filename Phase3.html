<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Phase 3</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-dT8WZNLW+WmnMquYY8GD+px5+PPMy/Rz1pZTBuLQv7EfAZG0xhipTd08JFVCf8bp" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js" integrity="sha384-jspctxrQmizRroXAKjoWWOOhkG3aZesspL7dmISSX5+p1LfXftbGQocYmzOsv9wx" crossorigin="anonymous"></script>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <link href="PHASE3.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
</head>

<div class="jumbotron">
  <h1>Aldo's Car Collection</h1>
  <p>...</p>
  <h1><span class="glyphicon glyphicon-road"></span></h1>
</div>

<h1>Check out my car Collection!<span class="badge badge-secondary">Vroom!</span></h1>

<div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Dropdown button
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a class="dropdown-item" href="#">Aldo,</a>
    <a class="dropdown-item" href="#">Roberto,</a>
    <a class="dropdown-item" href="#">Erich</a>
  </div>
</div>

<body>

      <script>
          var images = ["1.jpg", "2.jpg", "3.jpg", "4.jpg", "5.jpg", "6.jpg"];
          console.log(images);
          var Title = ["Black Audi","","Blue BMW","Green Ferrari","Gray Mercedes","Red Super Car","White Range Rover"];
          var Caption = ["Black Audi on brick road","Blue BMW on the road","Green Ferrari in the show","Grey Mercedes parked","Super Car of the future","White Range Rover outside"];
          var url;
          var ContainMe = document.createElement("div");
          ContainMe.setAttribute("class","Hold");
          ContainMe.setAttribute("id","Hold");
          document.body.appendChild(ContainMe);



          for (var i=0; i < images.length; i++)
          {
              console.log("image in iteration is" + images[i]);
              url =  images[i];
              urlTitle = Title[i];
              urlCaption = Caption[i];


              var count = i;
              count++;




             var favorite = document.createElement("button");
             favorite.innerHTML = "Favorite";
             favorite.setAttribute("id",i);
            favorite.addEventListener("click",function(){
              var jpg = this.id;
               var Title = document.getElementById("Title"+ jpg);
               var pTitle = Title.textContent;
               var Caption = document.getElementById("Caption"+ jpg);
               var pCaption = Caption.textContent;

              jpg++;
              setCookie("img"+jpg,images[i],1);

            var testbtn = document.getElementById("1");
            this.classList.toggle('testBtn');
            console.log("this cookie is " + getCookie("img"));
            //TODO: need to change favorite button to star if cookie is set
            //TODO: ADD NAVAGATION BAR
              window.location = "detailPgPhase3.html?" + "img=" + jpg+".jpg" + "&Title=" + pTitle + "&Caption=" + pCaption;
            });




             var unfavorite = document.createElement("button");
             unfavorite.innerHTML = "Unfavorite"
             unfavorite.setAttribute ("id", i);
             unfavorite.addEventListener("click",function(){
              var remove = this.id;

              remove++;


              setCookie("img" + remove,remove +".jpg", -1);
              location.reload();
            });




              urlOfDetailPage ="detailPgPhase3.html?" + "img=" + url + "&Title=" + urlTitle + "&Caption=" + urlCaption;
              var imgDiv = document.createElement("div");
              var imgInDiv = document.createElement("img");
              var CaptioninDiv = document.createElement("p");
              CaptioninDiv.setAttribute("id", "Caption" + i);

              var TitleinDiv = document.createElement("p");
              TitleinDiv.setAttribute("id", "Title" + i);
             //imgInDiv.setAttribute ("class", "Box");
             CaptioninDiv.innerHTML = Caption [i];
             imgDiv.setAttribute("class","Grid");
             imgDiv.setAttribute("id","holder"+i);
              TitleinDiv.innerHTML = Title [i];
              imgInDiv.setAttribute("class", "Image");
              imgInDiv.setAttribute("src", url);

              var link = document.createElement("a");

              link.setAttribute("href", urlOfDetailPage);
              imgDiv.appendChild(link);
              link.appendChild(imgInDiv);
              imgDiv.appendChild(TitleinDiv);
              imgDiv.appendChild(CaptioninDiv);

            if (getCookie("img"+ (i+1))){
            var favIcon = document.createElement("i");
            favIcon.setAttribute("class","fas fa-thumbs-up");
            imgDiv.appendChild(favIcon);
            }else {
              imgDiv.appendChild(favorite);
            }
             imgDiv.appendChild(unfavorite);
             ContainMe.appendChild(imgDiv);

             if (getCookie("img"+(i+1))){
              console.log("this is 1" + getCookie("img"+(i+1)));
              var favoriteCheck = document.getElementById("holder"+i);
              favoriteCheck.classList.add("favorite");
            }


              }

              function setCookie(cname,cvalue,exdays) {
              var d = new Date();
              d.setTime(d.getTime() + (exdays*24*60*60*1000));
              var expires = "expires=" + d.toGMTString();
              document.cookie = cname+"="+cvalue+"; "+expires;
              }

                function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i=0; i<ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1);
                    if (c.indexOf(name) == 0) {
                        return c.substring(name.length, c.length);
                    }
                }
                return "";
                }

                function checkCookie() {
                var user=getCookie("username");
                if (user != "") {
                    alert("Welcome again " + user);
                } else {
                  user = prompt("Please enter your name:","");
                  if (user != "" && user != null) {
                      setCookie("username", user, 30);
                  }
                }
                }

      </script>

</body>

</html>
